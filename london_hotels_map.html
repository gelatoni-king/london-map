<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>London Hotels - Points Map</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    #map {
      width: 100%;
      height: 100vh;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const map = L.map("map").setView([51.509, -0.118], 12);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19
    }).addTo(map);

    // Hotel + points data
    const hotels = [
      { name: "The Waldorf Hilton London", points: 80000 },
      { name: "Hampton By Hilton London Waterloo", points: 65000 },
      { name: "The Academy London", points: 80000 },
      { name: "Hilton London Bankside", points: 75000 },
      { name: "Lost Property St Paul's London", points: 80000 },
      { name: "DoubleTree by Hilton Hotel London - Marble Arch", points: 70000 },
      { name: "The Prince Akatoki London", points: 95000 },
      { name: "The Capital Hotel", points: 90000 },
      { name: "DoubleTree by Hilton London Angel Kings Cross", points: 65000 },
      { name: "Hilton London Tower Bridge", points: 70000 },
      { name: "Hilton London Metropole", points: 60000 },
      { name: "Doubletree By Hilton London Tower Of London", points: 65000 },
      { name: "Hilton London Paddington Hotel", points: 70000 },
      { name: "Hampton by Hilton London Old Street", points: 60000 },
      { name: "Canopy by Hilton London City", points: 80000 },
      { name: "Hart Shoreditch Hotel", points: 80000 },
      { name: "Hampton by Hilton London City", points: 70000 },
      { name: "DoubleTree by Hilton London Kensington", points: 70000 },
      { name: "Hyde Park London Hotels", points: 65000 },
      { name: "DoubleTree by Hilton London - Hyde Park", points: 65000 },
      { name: "DoubleTree by Hilton London - Chelsea", points: 60000 }
    ];

    // Geocode + place markers
    const markers = [];
    let index = 0;

    function geocodeNext() {
      if (index >= hotels.length) {
        if (markers.length > 0) {
          const group = L.featureGroup(markers);
          map.fitBounds(group.getBounds().pad(0.2));
        }
        return;
      }

      const hotel = hotels[index];
      const url =
        "https://nominatim.openstreetmap.org/search?format=json&q=" +
        encodeURIComponent(hotel.name + ", London, UK");

      fetch(url)
        .then(res => res.json())
        .then(data => {
          if (data && data.length > 0) {
            const lat = parseFloat(data[0].lat);
            const lon = parseFloat(data[0].lon);

            const marker = L.marker([lat, lon]).addTo(map);
            marker.bindPopup(
  `<b>${hotel.name}</b>
   <br>Points needed: ${hotel.points.toLocaleString()} pts
   <br><i>For 27 Dec â€“ 1 Jan (Hilton Official App)</i>`
);
            markers.push(marker);
          }
        })
        .finally(() => {
          index++;
          setTimeout(geocodeNext, 1000);
        });
    }

    geocodeNext();
  </script>
</body>
</html>
